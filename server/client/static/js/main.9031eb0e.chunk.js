(this["webpackJsonponline-store-react"]=this["webpackJsonponline-store-react"]||[]).push([[0],{20:function(e){e.exports=JSON.parse('{"apiEndpoint":"http://localhost:8080/api","isFireBase":false}')},50:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(19),s=n.n(c),i=(n(50),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))}),o=(n(51),n(9)),u=n(27),l=n(4),d=n(3),j=n(5),b=n(2),p=n.n(b),m=n(13),f=n(26),O=n.n(f),h=n(28),x=n(20),v="jwt-token",g="jwt-refresh-token",y="jwt-expires",N="user-local-id";var w={setTokens:function(e){var t=e.refreshToken,n=e.accessToken,r=e.userId,a=e.expiresIn,c=void 0===a?3600:a,s=(new Date).getTime()+1e3*c;localStorage.setItem(N,r),localStorage.setItem(v,n),localStorage.setItem(g,t),localStorage.setItem(y,s)},getAccessToken:function(){return localStorage.getItem(v)},getRefreshToken:function(){return localStorage.getItem(g)},getTokenExpiresDate:function(){return localStorage.getItem(y)},getUserId:function(){return localStorage.getItem(N)},removeAuthData:function(){localStorage.removeItem(N),localStorage.removeItem(v),localStorage.removeItem(g),localStorage.removeItem(y)}},k=O.a.create({baseURL:x.apiEndpoint+"/auth",params:{key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_KEY}}),S={register:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,k.post("signUp",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.next=3,k.post("signInWithPassword",{email:n,password:r,returnSecureToken:!0});case 3:return a=e.sent,c=a.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),refresh:function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("token",{grant_type:"refresh_token",refresh_token:w.getRefreshToken()});case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},C=S,L=O.a.create({baseURL:x.apiEndpoint});L.interceptors.request.use(function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a,c,s,i,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.getTokenExpiresDate(),r=w.getRefreshToken(),a=r&&n<Date.now(),!x.isFireBase){e.next=15;break}if(c=/\/$/gi.test(t.url),t.url=(c?t.url.slice(0,-1):t.url)+".json",!a){e.next=11;break}return e.next=9,C.refresh();case 9:s=e.sent,w.setTokens({refreshToken:s.refresh_token,idToken:s.id_token,expiresIn:s.expires_in,localId:s.user_id});case 11:(i=w.getAccessToken())&&(t.params=Object(l.a)(Object(l.a)({},t.params),{},{auth:i})),e.next=22;break;case 15:if(!a){e.next=20;break}return e.next=18,C.refresh();case 18:o=e.sent,w.setTokens(o);case 20:(u=w.getAccessToken())&&(t.headers=Object(l.a)(Object(l.a)({},t.headers),{},{Authorization:"Bearer ".concat(u)}));case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),L.interceptors.response.use((function(e){var t;return x.isFireBase&&(e.data={content:(t=e.data,t&&!t._id?Object.keys(t).map((function(e){return Object(l.a)({},t[e])})):t)}),e.data={content:e.data},e}),(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log(e),h.b.error("Somthing was wrong. Try it later")),Promise.reject(e)}));var I={get:L.get,post:L.post,put:L.put,delete:L.delete,patch:L.patch},R="user/",_={get:function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get(R);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.put(R+t._id,t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCurrentUser:function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get(R+w.getUserId());case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),update:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.patch(R+w.getUserId(),t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q=_,F=n(12),T=Object(F.a)();function A(e){switch(e){case"INVALID_PASSWORD":return"Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e";case"EMAIL_EXISTS":return"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442";default:return"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u0432\u0445\u043e\u0434\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435"}}var E=w.getAccessToken()?{entities:null,isLoading:!0,error:null,auth:{userId:w.getUserId()},isLoggedIn:!0,dataLoaded:!1}:{entities:null,isLoading:!1,error:null,auth:null,isLoggedIn:!1,dataLoaded:!1},P=Object(m.createSlice)({name:"users",initialState:E,reducers:{usersRequested:function(e){e.isLoading=!0},usersReceived:function(e,t){e.entities=t.payload,e.dataLoaded=!0,e.isLoading=!1},usersRequestFailed:function(e,t){e.error=t.payload,e.isLoading=!1},authRequestSuccess:function(e,t){e.auth=t.payload,e.isLoggedIn=!0},authRequestFailed:function(e,t){e.error=t.payload},userCreated:function(e,t){e.entities.push(t.payload)},userUpdated:function(e,t){var n=e.entities.findIndex((function(e){return t.payload._id===e._id}));e.entities[n]=t.payload},userLoggedOut:function(e){e.entities=null,e.isLoggedIn=!1,e.auth=null,e.dataLoaded=!1},authRequested:function(e){e.error=null}}}),D=P.reducer,U=P.actions,z=U.usersRequested,B=U.usersReceived,W=U.usersRequestFailed,Z=U.authRequestSuccess,J=U.authRequestFailed,H=U.userUpdated,K=U.userLoggedOut,M=Object(m.createAction)("user/authRequested"),Q=Object(m.createAction)("user/userUpdateRequested"),V=Object(m.createAction)("user/updateUserFailed"),$=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(n){var r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Q()),t.prev=1,t.next=4,q.update(e);case 4:r=t.sent,a=r.content,n(H(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(V(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},X=D,Y=n(8),G={get:function(){var e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("categories/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},ee=G,te=Object(m.createSlice)({name:"categories",initialState:{entities:null,isLoading:!0,error:null,lastFetch:null},reducers:{categoriesRequested:function(e){e.isLoading=!0},categoriesReceived:function(e,t){e.entities=t.payload,e.lastFetch=Date.now(),e.isLoading=!1},categoriesRequestFailed:function(e,t){e.error=t.payload,e.isLoading=!1}}}),ne=te.reducer,re=te.actions,ae=re.categoriesRequested,ce=re.categoriesReceived,se=re.categoriesRequestFailed,ie=ne,oe=n(0),ue=function(e){var t=e.id,n=Object(d.c)((function(e){return e.categories.isLoading})),r=Object(d.c)(function(e){return function(t){return t.categories.entities?t.categories.entities.find((function(t){return t._id===e})):[]}}(t));return n||!r?"loading ...":Object(oe.jsx)("span",{className:"badge",style:{backgroundColor:"var(--bs-".concat(r.color,")"),whiteSpace:"normal"},children:r.name})},le=function(e){var t=e.product,n=Object(d.b)(),r=Object(d.c)((function(e){return e.users.entities?e.users.entities.find((function(t){return t._id===e.users.auth.userId})):null})),a=r.cart,c=a.includes(t._id);return Object(oe.jsxs)("div",{className:"card mb-3",children:[Object(oe.jsx)("div",{style:{height:"400px"},className:"p-5",children:Object(oe.jsx)("img",{src:t.photo,className:"card-img-top img-fluid",style:{maxHeight:"100%",objectFit:"contain"},alt:"photo"})}),Object(oe.jsxs)("div",{className:"card-body",children:[Object(oe.jsx)(ue,{id:t.category}),Object(oe.jsx)("h5",{className:"card-title fs-1",children:t.name}),Object(oe.jsx)("p",{className:"card-text fs-3",children:t.description}),c?Object(oe.jsxs)(Y.a,{to:"/cart",className:"btn btn-outline-success btn-lg mx-2",children:[Object(oe.jsx)("i",{className:"bi bi-cart-check"}),"\xa0\u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"]}):Object(oe.jsxs)("button",{onClick:function(){return e=t._id,void n($(Object(l.a)(Object(l.a)({},r),{},{cart:[].concat(Object(u.a)(a),[e])})));var e},className:"btn btn-success btn-lg mx-2",children:[Object(oe.jsx)("i",{className:"bi bi-cart-plus"}),"\xa0\u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"]})]})]})},de="product/",je={get:function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get(de);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.put(de+t._id,t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCurrentProduct:function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get(de+w.getProductId());case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),update:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.patch(de+t._id,t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete(de+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},be=je,pe=w.getAccessToken()?{entities:null,isLoading:!0,error:null,isLoggedIn:!0,dataLoaded:!1}:{entities:null,isLoading:!1,error:null,isLoggedIn:!1,dataLoaded:!1},me=Object(m.createSlice)({name:"products",initialState:pe,reducers:{productsRequested:function(e){e.isLoading=!0},productsReceived:function(e,t){e.entities=t.payload,e.dataLoaded=!0,e.isLoading=!1},productsRequestFailed:function(e,t){e.error=t.payload,e.isLoading=!1},authRequestSuccess:function(e,t){e.isLoggedIn=!0},authRequestFailed:function(e,t){e.error=t.payload},productCreated:function(e,t){e.entities.push(t.payload)},productUpdated:function(e,t){var n=e.entities.findIndex((function(e){return t.payload._id===e._id}));e.entities[n]=t.payload},productLoggedOut:function(e){e.entities=null,e.isLoggedIn=!1,e.dataLoaded=!1},authRequested:function(e){e.error=null},productRemoved:function(e,t){e.entities=e.entities.filter((function(e){return e._id!==t.payload}))}}}),fe=me.reducer,Oe=me.actions,he=Oe.productsRequested,xe=Oe.productsReceived,ve=Oe.productsRequestFailed,ge=Oe.productCreated,ye=Oe.productUpdated,Ne=Oe.productRemoved,we=Object(m.createAction)("product/productCreateRequested"),ke=Object(m.createAction)("product/createProductFailed"),Se=Object(m.createAction)("product/productUpdateRequested"),Ce=Object(m.createAction)("product/updateProductFailed"),Le=Object(m.createAction)("user/commentRemoveRequested"),Ie=function(){return function(){var e=Object(j.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(he()),e.prev=1,e.next=4,be.get();case 4:r=e.sent,a=r.content,t(xe(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(ve(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},Re=fe,_e=function(e){var t=e.productId,n=Object(d.c)(function(e){return function(t){return t.products.entities?t.products.entities.find((function(t){return t._id===e})):[]}}(t));return n?Object(oe.jsxs)("div",{className:"container-fluid",children:[Object(oe.jsx)(le,{product:n}),Object(oe.jsx)("div",{className:"row gutters-sm",children:Object(oe.jsx)("div",{className:"col-md-4 mb-3"})})]}):Object(oe.jsx)("h1",{children:"Loading"})},qe=n(6),Fe=n(18),Te=n.n(Fe);function Ae(e,t,n){var r=(t-1)*n;return Te()(e).slice(r).take(n).value()}var Ee=function(e){var t=e.itemsCount,n=e.pageSize,r=e.onPageChange,a=e.currentPage,c=Math.ceil(t/n);if(1===c)return null;var s=Te.a.range(1,c+1);return Object(oe.jsx)("nav",{children:Object(oe.jsx)("ul",{className:"pagination",children:s.map((function(e){return Object(oe.jsx)("li",{className:"page-item "+(e===a?"active":""),children:Object(oe.jsx)("button",{className:"page-link",onClick:function(){r(e)},children:e})},"page_"+e)}))})})},Pe=function(e){var t=e.items,n=e.valueProperty,r=e.contentProperty,a=e.onItemSelect,c=e.selectedItem;return Object(oe.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(oe.jsx)("li",{className:"list-group-item"+(e._id===c?" active":""),onClick:function(){return a(e._id)},role:"button",children:e[r]},e[n])}))})};Pe.defaultProps={valueProperty:"_id",contentProperty:"name"};var De=Pe,Ue=n(43),ze=n.n(Ue);function Be(e){return ze()({thousand:" ",suffix:" \u20bd"}).to(e)}var We=function(e){var t=e.products,n=Object(d.b)(),r=Object(d.c)((function(e){return e.users.entities?e.users.entities.find((function(t){return t._id===e.users.auth.userId})):null})),a=r.cart;return Object(oe.jsx)("div",{children:t.map((function(e){var t=a.includes(e._id);return Object(oe.jsx)("div",{className:"card mb-3",children:Object(oe.jsxs)("div",{className:"row g-0",children:[Object(oe.jsx)("div",{className:"col-md-4 d-flex align-items-center justify-content-center",children:Object(oe.jsx)("img",{src:e.photo,className:"img-fluid rounded-start",alt:"img",width:"140",height:"140"})}),Object(oe.jsx)("div",{className:"col-md-8",children:Object(oe.jsxs)("div",{className:"card-body",children:[Object(oe.jsx)("h5",{className:"card-title",children:e.name}),Object(oe.jsx)("p",{className:"card-text",children:e.description}),Object(oe.jsxs)("p",{className:"card-text",children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",Be(+e.price)]}),Object(oe.jsx)(Y.a,{className:"btn btn-primary",to:"/product/".concat(e._id),children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),t?Object(oe.jsxs)(Y.a,{to:"/cart",className:"btn btn-outline-success mx-2",children:[Object(oe.jsx)("i",{className:"bi bi-cart-check"}),"\xa0\u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"]}):Object(oe.jsxs)("button",{onClick:function(){return t=e._id,void n($(Object(l.a)(Object(l.a)({},r),{},{cart:[].concat(Object(u.a)(a),[t])})));var t},className:"btn btn-success mx-2",children:[Object(oe.jsx)("i",{className:"bi bi-cart-plus"}),"\xa0\u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"]})]})})]})},e._id)}))})},Ze=function(){var e=Object(d.c)((function(e){return e.products.entities})),t=Object(d.c)((function(e){return e.categories.entities})),n=Object(d.c)((function(e){return e.categories.isLoading})),a=Object(r.useState)(1),c=Object(qe.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),u=Object(qe.a)(o,2),j=u[0],b=u[1],p=Object(r.useState)(),m=Object(qe.a)(p,2),f=m[0],O=m[1],h=Object(r.useState)({path:"name",order:"asc"}),x=Object(qe.a)(h,2),v=x[0],g=x[1];Object(r.useEffect)((function(){i(1)}),[f,j]);var y,N,w=(y=e,j?y.filter((function(e){return-1!==e.name.toLowerCase().indexOf(j.toLowerCase())})):f?y.filter((function(e){return JSON.stringify(e.category)===JSON.stringify(f)})):y).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{price:+e.price})})),k=w.length,S=Ae(Te.a.orderBy(w,[v.path],[v.order]),s,8);return Object(oe.jsx)("div",{className:"container-fluid",children:Object(oe.jsxs)("div",{className:"row g-0",children:[Object(oe.jsx)("input",{className:"form-control w-100 mb-3",type:"text",name:"searchQuery",placeholder:"Search...",onChange:function(e){var t=e.target;O(void 0),b(t.value)},value:j}),t&&!n&&Object(oe.jsxs)("div",{className:"col d-flex flex-column flex-shrink-0",style:{maxWidth:"250px",marginRight:"1rem"},children:[Object(oe.jsx)(De,{selectedItem:f,items:t,onItemSelect:function(e){""!==j&&b(""),console.log(e),O(e)}}),Object(oe.jsx)("button",{className:"btn btn-secondary mt-2",onClick:function(){O(void 0)},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0442\u044c"})]}),Object(oe.jsxs)("div",{className:"col d-flex flex-column",children:[k>0&&Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)("div",{className:"d-flex justify-content-center",children:Object(oe.jsxs)("button",{className:"btn btn-light mb-3",onClick:function(){"name"!==v.path?g(Object(l.a)(Object(l.a)({},v),{},{order:"asc"===v.order?"desc":"asc"})):g({path:"price",order:"asc"})},children:["\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438",(N=v,"asc"===N.order?Object(oe.jsx)("i",{className:"bi bi-caret-down-fill mx-2"}):Object(oe.jsx)("i",{className:"bi bi-caret-up-fill mx2"}))]})}),Object(oe.jsx)(We,{products:S})]}),Object(oe.jsx)("div",{className:"d-flex justify-content-center",children:Object(oe.jsx)(Ee,{itemsCount:k,pageSize:8,currentPage:s,onPageChange:function(e){i(e)}})})]})]})})},Je=n(11),He=n.n(Je),Ke=function(e){var t=e.children,n=Object(d.c)((function(e){return e.products.dataLoaded})),a=Object(d.b)();return Object(r.useEffect)((function(){n||a(Ie())}),[]),n?t:"Loading"};Ke.propTypes={children:He.a.oneOfType([He.a.arrayOf(He.a.node),He.a.node])};var Me=Ke,Qe=function(){var e=Object(o.h)().productId;return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(Me,{children:e?Object(oe.jsx)(_e,{productId:e}):Object(oe.jsx)(Ze,{})})})},Ve=n(17);function $e(e,t){var n={};function r(e,t,n){var r;switch(e){case"isRequired":r="boolean"===typeof t?!t:""===t.trim();break;case"isEmail":r=!/^\S+@\S+\.\S+$/g.test(t);break;case"isUrl":r=!/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi.test(t);break;case"isCapitalSymbol":r=!/[A-Z]+/g.test(t);break;case"isContainDigit":r=!/\d+/g.test(t);break;case"min":r=t.length<n.value}if(r)return n.message}for(var a in e)for(var c in t[a]){var s=r(c,e[a],t[a][c]);s&&!n[a]&&(n[a]=s)}return n}var Xe=function(e){var t=e.label,n=e.type,a=e.name,c=e.value,s=e.onChange,i=e.error,o=Object(r.useState)(!1),u=Object(qe.a)(o,2),l=u[0],d=u[1];return Object(oe.jsxs)("div",{className:"mb-4",children:[Object(oe.jsxs)("label",{htmlFor:a,children:[" ",t]}),Object(oe.jsxs)("div",{className:"input-group has-validation",children:[Object(oe.jsx)("input",{type:l?"text":n,id:a,name:a,value:c,onChange:function(e){var t=e.target;s({name:t.name,value:t.value})},className:"form-control"+(i?" is-invalid":"")}),"password"===n&&Object(oe.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){d((function(e){return!e}))},children:Object(oe.jsx)("i",{className:"bi bi-eye"+(l?"-slash":"")})}),i&&Object(oe.jsx)("div",{className:"invalid-feedback ",children:i})]})]})};Xe.defaultProps={type:"text"};var Ye=Xe,Ge=function(e){var t=e.name,n=e.value,r=e.onChange,a=e.children,c=e.error;return Object(oe.jsxs)("div",{className:"form-check mb-4",children:[Object(oe.jsx)("input",{className:"form-check-input"+(c?" is-invalid":""),type:"checkbox",value:"",id:t,onChange:function(){r({name:t,value:!n})},checked:n}),Object(oe.jsx)("label",{className:"form-check-label ",htmlFor:t,children:a}),c&&Object(oe.jsx)("div",{className:"invalid-feedback",children:c})]})},et=function(){var e=Object(o.g)(),t=Object(r.useState)({email:"",password:"",stayOn:!1}),n=Object(qe.a)(t,2),a=n[0],c=n[1],s=Object(d.c)((function(e){return e.users.error})),i=Object(d.b)(),u=Object(r.useState)({}),b=Object(qe.a)(u,2),m=b[0],f=b[1],O=function(e){c((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(Ve.a)({},e.name,e.value))}))},h={email:{isRequired:{message:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}},password:{isRequired:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u043a\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}}};Object(r.useEffect)((function(){x()}),[a]);var x=function(){var e=$e(a,h);return f(e),0===Object.keys(e).length},v=0===Object.keys(m).length;return Object(oe.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),x()){var n=e.location.state?e.location.state.from.pathname:"/";i(function(e){var t=e.payload,n=e.redirect;return function(){var e=Object(j.a)(p.a.mark((function e(r){var a,c,s,i,o,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,c=t.password,r(M()),e.prev=2,e.next=5,C.login({email:a,password:c});case 5:s=e.sent,w.setTokens(s),r(Z({userId:s.localId})),w.setTokens(s),T.push(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),i=e.t0.response.data.error,o=i.code,u=i.message,400===o?(l=A(u),r(J(l))):r(J(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()}({payload:a,redirect:n}))}},children:[Object(oe.jsx)(Ye,{label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email",value:a.email,onChange:O,error:m.email}),Object(oe.jsx)(Ye,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",value:a.password,onChange:O,error:m.password}),Object(oe.jsx)(Ge,{value:a.stayOn,onChange:O,name:"stayOn",children:"\u041e\u0441\u0442\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435"}),s&&Object(oe.jsx)("p",{className:"text-danger",children:s}),Object(oe.jsx)("button",{type:"submit",disabled:!v,className:"btn btn-primary w-100 mx-auto",children:"Submit"})]})},tt=function(){var e=Object(d.b)(),t=Object(r.useState)({email:"",password:"",name:"",licence:!1}),n=Object(qe.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)({}),i=Object(qe.a)(s,2),o=i[0],u=i[1],b=function(e){c((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(Ve.a)({},e.name,e.value))}))},m={email:{isRequired:{message:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},isEmail:{message:"Email \u0432\u0432\u0435\u0434\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e"}},name:{isRequired:{message:"\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},min:{message:"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u0435\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443 \u0438\u0437 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",value:3}},password:{isRequired:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},isCapitalSymbol:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443"},isContainDigit:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u043e \u0447\u0438\u0441\u043b\u043e"},min:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u0430\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443 \u0438\u0437 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",value:8}},licence:{isRequired:{message:"\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0448 \u0441\u0435\u0440\u0432\u0438\u0441 \u0431\u0435\u0437 \u043f\u043e\u0434\u0442\u0440\u0435\u0432\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u043b\u0438\u0446\u0435\u043d\u0437\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u044f"}}};Object(r.useEffect)((function(){f()}),[a]);var f=function(){var e=$e(a,m);return u(e),0===Object.keys(e).length},O=0===Object.keys(o).length;return Object(oe.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),f()){var n,r=Object(l.a)(Object(l.a)({},a),{},{cart:[]});e((n=r,function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(M()),e.prev=1,e.next=4,C.register(n);case 4:r=e.sent,w.setTokens(r),t(Z({userId:r.userId})),T.push("/product"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(J(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))}},children:[Object(oe.jsx)(Ye,{label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email",value:a.email,onChange:b,error:o.email}),Object(oe.jsx)(Ye,{label:"\u0418\u043c\u044f",name:"name",value:a.name,onChange:b,error:o.name}),Object(oe.jsx)(Ye,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",value:a.password,onChange:b,error:o.password}),Object(oe.jsxs)(Ge,{value:a.licence,onChange:b,name:"licence",error:o.licence,children:["\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c ",Object(oe.jsx)("a",{children:"\u043b\u0438\u0446\u0435\u043d\u0437\u0438\u043e\u043d\u043d\u043e\u0435 \u0441\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435"})]}),Object(oe.jsx)("button",{type:"submit",disabled:!O,className:"btn btn-primary w-100 mx-auto",children:"Submit"})]})},nt=function(){var e=Object(o.h)().type,t=Object(r.useState)("register"===e?e:"login"),n=Object(qe.a)(t,2),a=n[0],c=n[1],s=function(e){c((function(e){return"register"===e?"login":"register"}))};return Object(oe.jsx)("div",{className:"container-fluid mt-5",children:Object(oe.jsx)("div",{className:"row",children:Object(oe.jsx)("div",{className:"col-md-6 offset-md-3 shadow p-4",children:"register"===a?Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)("h3",{className:"mb-4",children:"Register"}),Object(oe.jsx)(tt,{}),Object(oe.jsxs)("p",{children:["Already have account?"," ",Object(oe.jsxs)("a",{role:"button",onClick:s,children:[" ","Sign In"]})]})]}):Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)("h3",{className:"mb-4",children:"Login"}),Object(oe.jsx)(et,{}),Object(oe.jsxs)("p",{children:["Dont have account?"," ",Object(oe.jsxs)("a",{role:"button",onClick:s,children:[" ","Sign Up"]})]})]})})})})},rt=function(){return Object(oe.jsx)("div",{className:"container-fluid mt-5",children:Object(oe.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(oe.jsxs)("h1",{children:[Object(oe.jsx)("span",{className:"text-uppercase",children:"Online Store"})," - \u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"]}),Object(oe.jsx)(Y.a,{className:"btn btn-lg btn-primary my-3 fs-1",to:"/product",children:"\u0412 \u043a\u0430\u0442\u0430\u043b\u043e\u0433"})]})})},at=function(){var e=Object(d.c)((function(e){return e.users.entities?e.users.entities.find((function(t){return t._id===e.users.auth.userId})):null})),t=Object(r.useState)(!1),n=Object(qe.a)(t,2),a=n[0],c=n[1];return e?Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsxs)("div",{className:"dropdown col",onClick:function(){c((function(e){return!e}))},children:[Object(oe.jsxs)("div",{className:"btn link-light dropdown-toggle d-flex align-items-center",children:[Object(oe.jsx)("div",{className:"me-2",children:e.name}),Object(oe.jsx)("i",{className:"bi bi-person-circle mx-2"})]}),Object(oe.jsx)("div",{className:"w-100 dropdown-menu"+(a?" show":""),children:Object(oe.jsx)(Y.a,{to:"/logout",className:"dropdown-item",children:"\u0412\u044b\u0439\u0442\u0438"})})]}),Object(oe.jsx)(Y.a,{to:"/cart",className:"btn btn-outline-success",children:Object(oe.jsx)("i",{className:"bi bi-cart"})})]}):"Loading"},ct=function(){var e=Object(d.c)((function(e){return e.users.isLoggedIn}));return Object(oe.jsx)("nav",{className:"navbar navbar-expand navbar-dark bg-dark mb-3",children:Object(oe.jsxs)("div",{className:"container-fluid",children:[Object(oe.jsxs)("ul",{className:"navbar-nav",children:[Object(oe.jsx)("li",{className:"nav-item",children:Object(oe.jsx)(Y.b,{className:"nav-link ",activeClassName:"active","aria-current":"page",exact:!0,to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),e&&Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)("li",{className:"nav-item",children:Object(oe.jsx)(Y.b,{activeClassName:"active",className:"nav-link ","aria-current":"page",to:"/product",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})}),Object(oe.jsx)("li",{className:"nav-item",children:Object(oe.jsx)(Y.b,{activeClassName:"active",className:"nav-link ","aria-current":"page",to:"/add",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})]}),Object(oe.jsx)("div",{className:"d-flex align-items-center",children:e?Object(oe.jsx)(at,{}):Object(oe.jsx)(Y.a,{className:"nav-link ","aria-current":"page",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})},st=n(44),it=["component","children"],ot=function(e){var t=e.component,n=e.children,r=Object(st.a)(e,it),a=Object(d.c)((function(e){return e.users.isLoggedIn}));return Object(oe.jsx)(o.b,Object(l.a)(Object(l.a)({},r),{},{render:function(e){return a?t?Object(oe.jsx)(t,Object(l.a)({},e)):n:Object(oe.jsx)(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ut=function(){var e=Object(d.b)();return Object(r.useEffect)((function(){e((function(e){w.removeAuthData(),e(K()),T.push("/")}))}),[]),Object(oe.jsx)("h1",{children:"Loading"})},lt=function(e){var t=e.children,n=Object(d.b)(),a=Object(d.c)((function(e){return e.users.isLoggedIn})),c=Object(d.c)((function(e){return e.users.isLoading}));return Object(r.useEffect)((function(){n(function(){var e=Object(j.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n().categories.lastFetch,!(Date.now()-c>6e5)){e.next=14;break}return t(ae()),e.prev=3,e.next=6,ee.get();case 6:r=e.sent,a=r.content,t(ce(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t(se(e.t0.message));case 14:case"end":return e.stop()}var c}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()),a&&(n(function(){var e=Object(j.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z()),e.prev=1,e.next=4,q.get();case 4:r=e.sent,a=r.content,console.log(a),t(B(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(W(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),n(Ie()))}),[a]),c?"Loading":t};lt.propTypes={children:He.a.oneOfType([He.a.arrayOf(He.a.node),He.a.node])};var dt=lt,jt=function(e){var t=e.label,n=e.value,r=e.onChange,a=e.defaultOption,c=e.options,s=e.error,i=e.name,o=Array.isArray(c)||"object"!==typeof c?c:Object.keys(c).map((function(e){return{name:c[e].name,value:c[e]._id}}));return Object(oe.jsxs)("div",{className:"mb-4",children:[Object(oe.jsx)("label",{htmlFor:"validationCustom04",className:"form-label",children:t}),Object(oe.jsxs)("select",{className:"form-select"+(s?" is-invalid":""),id:"validationCustom04",name:i,value:n,onChange:function(e){var t=e.target;r({name:t.name,value:t.value})},children:[Object(oe.jsx)("option",{disabled:!0,value:"",children:a}),o&&o.map((function(e){return Object(oe.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),s&&Object(oe.jsx)("div",{className:"invalid-feedback",children:s})]})},bt=n(45),pt=function(e){var t=e.productId,n=e.edit,a=e.onCancel,c=Object(d.b)(),s=Object(d.c)((function(e){return e.products.entities})),i={name:"",description:"",price:"",category:"",quantity:"",photo:""},o=Object(r.useState)(i),u=Object(qe.a)(o,2),b=u[0],m=u[1];Object(r.useEffect)((function(){var e=s.find((function(e){return e._id===t}));e&&m(Object(l.a)({},e))}),[t]);var f=Object(d.c)((function(e){return e.categories.entities})).map((function(e){return{label:e.name,value:e._id}})),O=Object(r.useState)({}),h=Object(qe.a)(O,2),x=h[0],v=h[1],g=function(e){m((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(Ve.a)({},e.name,e.value))}))},y={name:{isRequired:{message:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},min:{message:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u0435\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443 \u0438\u0437 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",value:3}},description:{isRequired:{message:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},min:{message:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u0435\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443 \u0438\u0437 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",value:3}},price:{isRequired:{message:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}},quantity:{isRequired:{message:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}},category:{isRequired:{message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}},photo:{isRequired:{message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0444\u043e\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430"},isUrl:{message:"\u0414\u0430\u043d\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043e\u0448\u0438\u0431\u043a\u0443"}}};Object(r.useEffect)((function(){N()}),[b]);var N=function(){var e=$e(b,y);return v(e),0===Object.keys(e).length},w=0===Object.keys(x).length;return Object(oe.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),N()){if(n)c((r=b,function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Se()),e.prev=1,e.next=4,be.update(r);case 4:n=e.sent,a=n.content,t(ye(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Ce(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),a();else{var t=Object(l.a)(Object(l.a)({},b),{},{_id:Object(bt.a)()});c(function(e){return function(){var t=Object(j.a)(p.a.mark((function t(n){var r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(we()),t.prev=1,t.next=4,be.create(e);case 4:r=t.sent,a=r.content,n(ge(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(ke(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}var r;m(i)}},children:[Object(oe.jsx)(Ye,{label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",name:"name",value:b.name,onChange:g,error:x.name}),Object(oe.jsx)(Ye,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",value:b.description,onChange:g,error:x.description}),Object(oe.jsx)(Ye,{label:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",type:"number",name:"price",value:b.price,onChange:g,error:x.price}),Object(oe.jsx)(jt,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",defaultOption:"Choose...",name:"category",options:f,onChange:g,value:b.category,error:x.category}),Object(oe.jsx)(Ye,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",name:"quantity",value:b.quantity,onChange:g,error:x.quantity}),Object(oe.jsx)(Ye,{label:"\u0424\u043e\u0442\u043e",type:"text",name:"photo",value:b.photo,onChange:g,error:x.photo}),Object(oe.jsx)("button",{type:"submit",disabled:!w,className:"btn btn-primary w-100 mx-auto",children:n?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),n&&Object(oe.jsx)("button",{className:"btn btn-danger w-100 mx-auto my-2",type:"button",onClick:function(){a(),m(i)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})},mt=function(){var e=Object(d.c)((function(e){return e.products.entities})),t=Object(d.b)(),n=Object(r.useState)(""),a=Object(qe.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),o=Object(qe.a)(i,2),u=o[0],l=o[1],b=Object(d.c)((function(e){return e.categories.entities})),m=Object(d.c)((function(e){return e.categories.isLoading})),f=Object(r.useState)(1),O=Object(qe.a)(f,2),h=O[0],x=O[1],v=Object(r.useState)(""),g=Object(qe.a)(v,2),y=g[0],N=g[1],w=Object(r.useState)(),k=Object(qe.a)(w,2),S=k[0],C=k[1],L=function(e){var n;t((n=e,function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Le()),e.prev=1,e.next=4,be.remove(n);case 4:t(Ne(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t(ve(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())),l(!1)};Object(r.useEffect)((function(){x(1)}),[S,y]);var I=function(e,t){if(_[t].component){var n=_[t].component;return"function"===typeof n?n(e):n}return Te.a.get(e,_[t].path)};var R,_={name:{path:"name",name:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",component:function(e){return Object(oe.jsx)(Y.a,{className:"small",to:"/product/".concat(e._id),children:e.name})}},description:{name:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",component:function(e){return Object(oe.jsx)("p",{className:"small",style:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:"3",WebkitBoxOrient:"vertical"},children:e.description})}},price:{name:"\u0426\u0435\u043d\u0430",component:function(e){return Object(oe.jsx)("p",{className:"small text-nowrap",children:Be(+e.price)})}},category:{name:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",component:function(e){return Object(oe.jsx)(ue,{id:e.category})}},quantity:{name:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",component:function(e){return Object(oe.jsx)("p",{className:"small text-center",children:e.quantity})}},photo:{name:"\u0424\u043e\u0442\u043e",component:function(e){return Object(oe.jsx)("div",{style:{width:"100px"},children:Object(oe.jsx)("img",{src:e.photo,alt:"photo",className:"img-fluid"})})}},actions:{path:"photo",name:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",component:function(e){return Object(oe.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[Object(oe.jsx)("i",{style:{color:"blue"},role:"button",className:"bi bi-pencil-fill mx-2",onClick:function(){return t=e._id,s(t),void l(!0);var t}}),Object(oe.jsx)("i",{style:{color:"red"},role:"button",className:"bi bi-x-circle-fill",onClick:function(){return L(e._id)}})]})}}},q=(R=e,y?R.filter((function(e){return-1!==e.name.toLowerCase().indexOf(y.toLowerCase())})):R),F=q?q.length:0,T=Ae(q,h,8);return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(Me,{children:Object(oe.jsx)("div",{className:"container-fluid",children:Object(oe.jsxs)("div",{className:"row g-0",children:[b&&!m&&Object(oe.jsx)("div",{className:"col d-flex flex-column flex-shrink-0 p-3",style:{maxWidth:"300px",marginRight:"1rem"},children:Object(oe.jsx)(pt,{productId:c,edit:u,onCancel:function(){l(!1)}})}),Object(oe.jsxs)("div",{className:"col d-flex flex-column",children:[Object(oe.jsx)("input",{className:"form-control w-100 mb-3",type:"text",name:"searchQuery",placeholder:"Search...",onChange:function(e){var t=e.target;C(void 0),N(t.value)},value:y}),F>0&&Object(oe.jsxs)("table",{className:"table",children:[Object(oe.jsx)("thead",{children:Object(oe.jsx)("tr",{children:Object.keys(_).map((function(e){return Object(oe.jsxs)("th",{role:_[e].path&&"button",scope:"col",children:[_[e].name," "]},e)}))})}),Object(oe.jsx)("tbody",{children:T.map((function(e){return Object(oe.jsx)("tr",{children:Object.keys(_).map((function(t){return Object(oe.jsx)("td",{children:I(e,t)},t)}))},e._id)}))})]}),Object(oe.jsx)("div",{className:"d-flex justify-content-center",children:Object(oe.jsx)(Ee,{itemsCount:F,pageSize:8,currentPage:h,onPageChange:function(e){x(e)}})})]})]})})})})},ft=function(){return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(Me,{children:Object(oe.jsx)(mt,{})})})},Ot=function(){var e=Object(d.c)((function(e){return e.products.entities})),t=Object(d.b)(),n=Object(d.c)((function(e){return e.users.entities?e.users.entities.find((function(t){return t._id===e.users.auth.userId})):null})),a=n.cart,c=Object(r.useState)(1),s=Object(qe.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),j=Object(qe.a)(u,2),b=j[0],p=j[1],m=Object(r.useState)(),f=Object(qe.a)(m,2),O=f[0],h=f[1];Object(r.useEffect)((function(){o(1)}),[O,b]);if(!e||!a)return"Loading...";var x,v=a.map((function(t){return e.find((function(e){return e._id===t}))})),g=v.reduce((function(e,t){return e+ +t.price}),0),y=(x=v,b?x.filter((function(e){return-1!==e.name.toLowerCase().indexOf(b.toLowerCase())})):x),N=y?y.length:0,w=Ae(y,i,8);return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(Me,{children:Object(oe.jsxs)("div",{className:"container-fluid",children:[Object(oe.jsx)("input",{className:"form-control w-100 mb-3",type:"text",name:"searchQuery",placeholder:"Search...",onChange:function(e){var t=e.target;h(void 0),p(t.value)},value:b}),Object(oe.jsx)("h1",{className:"card-title mb-3",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(oe.jsxs)("div",{className:"row g-0",children:[Object(oe.jsxs)("div",{className:"d-flex flex-column col",children:[N>0&&Object(oe.jsx)("div",{children:w.map((function(e){return Object(oe.jsxs)("div",{className:"card mb-3",children:[Object(oe.jsx)("button",{className:"position-absolute top-0 end-0 btn btn-light btn-sm link-danger fs-4",onClick:function(){return r=e._id,void t($(Object(l.a)(Object(l.a)({},n),{},{cart:a.filter((function(e){return e!==r}))})));var r},children:Object(oe.jsx)("i",{className:"bi bi-x-circle-fill"})}),Object(oe.jsxs)("div",{className:"row g-0",children:[Object(oe.jsx)("div",{className:"col-md-4 d-flex align-items-center justify-content-center",children:Object(oe.jsx)("img",{src:e.photo,className:"img-fluid rounded-start",alt:"img",width:"140",height:"140"})}),Object(oe.jsx)("div",{className:"col-md-8",children:Object(oe.jsxs)("div",{className:"card-body row g-0",children:[Object(oe.jsxs)("div",{className:"col",children:[Object(oe.jsx)("h5",{className:"card-title",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(oe.jsx)(Y.a,{to:"/product/".concat(e._id),className:"text-center",children:e.name})]}),Object(oe.jsxs)("div",{className:"col",children:[Object(oe.jsx)("h5",{className:"card-title text-center",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(oe.jsx)("p",{className:"text-center",children:"1"})]}),Object(oe.jsxs)("div",{className:"col",children:[Object(oe.jsx)("h5",{className:"card-title text-center",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(oe.jsx)("p",{className:"text-center",children:Be(+e.price)})]})]})})]})]},e._id)}))}),Object(oe.jsx)("div",{className:"d-flex justify-content-center",children:Object(oe.jsx)(Ee,{itemsCount:N,pageSize:8,currentPage:i,onPageChange:function(e){o(e)}})})]}),Object(oe.jsx)("div",{className:"col-2 card mb-3",style:{marginLeft:"1rem"},children:Object(oe.jsxs)("div",{className:"card-body",children:[Object(oe.jsx)("h5",{className:"card-title text-center",children:"\u0418\u0442\u043e\u0433\u043e"}),Object(oe.jsx)("p",{className:"card-text text-center",children:Be(g)}),Object(oe.jsx)("button",{type:"button",className:"btn btn-primary w-100",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})})]})]})})})};var ht=function(){return Object(oe.jsx)("div",{children:Object(oe.jsxs)(dt,{children:[Object(oe.jsx)(ct,{}),Object(oe.jsxs)(o.d,{children:[Object(oe.jsx)(o.b,{path:"/product/:productId?",component:Qe}),Object(oe.jsx)(ot,{path:"/add",component:ft}),Object(oe.jsx)(ot,{path:"/cart",component:Ot}),Object(oe.jsx)(o.b,{path:"/login/:type?",component:nt}),Object(oe.jsx)(o.b,{path:"/logout",component:ut}),Object(oe.jsx)(o.b,{path:"/",exact:!0,component:rt}),Object(oe.jsx)(o.a,{to:"/"})]}),Object(oe.jsx)(h.a,{})]})})},xt=n(13),vt=xt.combineReducers,gt=xt.configureStore,yt=vt({users:X,products:Re,categories:ie});var Nt=gt({reducer:yt});s.a.render(Object(oe.jsx)(a.a.StrictMode,{children:Object(oe.jsx)(d.a,{store:Nt,children:Object(oe.jsx)(o.c,{history:T,children:Object(oe.jsx)(ht,{})})})}),document.getElementById("root")),i()}},[[81,1,2]]]);
//# sourceMappingURL=main.9031eb0e.chunk.js.map